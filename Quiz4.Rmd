---
title: "Quiz 4"
author: "Theodoros Theologitis"
date: "August 8, 2016"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
# Question 1

The American Community Survey distributes downloadable data about United States communities. Download the 2006 microdata survey about housing for the state of Idaho using `download.file()` from here:

<http://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06hid.csv>

and load the data into R. The code book, describing the variable names is here:

<https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FPUMSDataDict06.pdf>

Apply `strsplit()` to split all the names of the data frame on the characters "wgtp". 

What is the value of the 123 element of the resulting list?

```{r, cache=TRUE}
#########################################################################
#### Download the csv file and save it in the working directory      ####
#### in a file called "data" where the downloaded csv file is called ####
#### "housingdata".                                                  ####
#########################################################################

if(!file.exists("./data")){dir.create("./data")}
fileURL<-"http://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06hid.csv"
destination<-paste0("./data", "/housingdata.csv")
download.file(fileURL, destfile = destination)
houseDATA<-read.csv("./data/housingdata.csv")
#################################################
#### Check the names of the last 6 variables ####
#################################################
tail(names(houseDATA))
#########################################
#### Split the names based on "wgtp" ####
#########################################
splitNAMES<-strsplit(names(houseDATA), "\\wgtp")
##################################################
#### Get a glimpse of the change we performed ####
##################################################
tail(splitNAMES)
################################
#### Get the 123-rd element ####
################################
splitNAMES[[123]]
```

# Question 2
Load the Gross Domestic Product data for the 190 ranked countries in this data set:

<https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv>

Remove the commas from the GDP numbers in millions of dollars and average them. What is the average?

Original data sources:

<http://data.worldbank.org/data-catalog/GDP-ranking-table>

```{r, cache=TRUE}
#########################################################################
#### Download the csv file and save it in the working directory      ####
#### in a file called "data" where the downloaded csv file is called ####
#### "GDP".                                                          ####
#########################################################################

if(!file.exists("./data")){dir.create("./data")}
fileURL<-"https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
destination<-paste0("./data", "/GDP.csv")
download.file(fileURL, destfile = destination)

###############################################################
#### The file was first opened with EXCEL in order to      ####
#### determine how many rows would be skipped and how many ####
#### rows would be read. Hence "skip" was set to 4 and     ####
#### "nrows" was set to 190.                               ####
###############################################################
gdpDATA<-read.csv("./data/GDP.csv", skip = 4, nrows = 190)
####################################################
#### Check the the first 6 rows of the table    ####
#### in order to get some intuition of the data ####
####################################################
head(gdpDATA)
#########################
#### Make the change ####
#########################
gdp<-as.numeric(gsub(",", "", gdpDATA[, "X.4"]))
###################################################
#### Confirm that the change we wanted to make ####
#### has been performed.                       ####
###################################################
head(gdp)
##########################
#### Find the Average ####
##########################
mean(gdp)
```



## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
